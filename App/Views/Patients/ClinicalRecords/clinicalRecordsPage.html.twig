{% set noResults = data.clinicalRecords is empty %}
{% set path = 'Patients/ClinicalRecords/NoResults.html.twig' %}

{% embed 'utils/recordCard.html.twig' with {'patient': data.patient, 'returnRoute': '/patients', 'noResults': noResults, 'path': path} %} 

{% block modals %}
    {% if currentUser.hasPermission('control_destroy') %}
        {% include 'Patients/ClinicalRecords/deleteRecord.html.twig' %}
    {% endif %}            
{% endblock %}

{% block stylesheets %}
    {{parent()}}
    <link rel="stylesheet" href="/web/assets/dataTables/css/dataTables.bootstrap4.min.css"> 
    <link rel="stylesheet" href="/web/assets/dataTables/css/responsive.bootstrap4.min.css"> 
    <link rel="stylesheet" href="/web/dist/css/records.css"> 
{% endblock %} 

{% block buttons %}
    {% if not data.patient.deleted %}
        {% if currentUser.hasPermission('paciente_show') %}
            <a href="/patient/{{ data.patient.id }}" class="btn btn-sm btn-primary pull-right" id="recordsbtn" title="Ver perfil del Paciente"><i class="fa fa-user" aria-hidden="true"></i></a>
        {% endif %}     
    {% else %}
        {% if currentUser.hasPermission('paciente_update') or currentUser.hasPermission('datosDemograficos_update') or currentUser.hasPermission('control_update')  %}
           <a title="Reactivar Paciente" class="btn btn-sm btn-primary" id="editbtn" href="/patient/{{data.patient.id}}/activate">Reactivar Paciente</a>
        {% endif %} 
    {% endif %}          
{% endblock %}


{% block navtabs %}
    <li class="nav-item">
        <a class="nav-link active" id="personal-tab" data-form="#ClinicalRecords" data-toggle="tab" href="#records" role="tab" aria-controls="records" aria-expanded="true"><i class="fa fa-user" aria-hidden="true"></i><span class="hidden"> Historia</span> Cl√≠nica</a>
    </li>
    <li class="nav-item">
        <a class="nav-link" id="reports-tab" data-form="#reports" data-toggle="tab" href="#reports" role="tab" aria-controls="records" aria-expanded="true"><i class="fa fa-bar-chart" aria-hidden="true"></i> Reportes</a>
    </li>
{% endblock %}

{% block tabcontent %}
    <div class="tab-pane fade show active" id="records" role="tabpanel" aria-labelledby="records-tab">
        <br>
        <div>
            {% include 'Patients/ClinicalRecords/recordsTable.html.twig' %}
        </div>
    </div>
    <div class="tab-pane fade" id="reports" role="tabpanel" aria-labelledby="records-tab">
        <br>
        <div>
        </div>
    </div>
{% endblock %}

{% block javascripts %}

    <script src="/web/assets/dataTables/js/datatables.min.js"></script>
    <script src="/web/assets/dataTables/js/responsive.bootstrap4.min.js"></script>
    <script src="/web/dist/js/recordsTable.js"></script>
    
{% endblock %}

{% endembed %}
