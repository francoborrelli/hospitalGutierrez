{% extends 'utils/base.html.twig' %} 

{% block stylesheets %}
<link rel="stylesheet" href="/web/dist/css/patientProfile.css"> 
{% endblock %} 

{% block body %} 

{% include 'Patients/deletePatient.html.twig' %} 
{% include 'Patients/editPersonalInfo.html.twig'%}
{% include 'Patients/editDemographicInfo.html.twig'%}

<div class="container userReport">
  <div class="card ">

    <!-- header -->
    <div class="card-header">
        {{ patient.firstName }} {{ patient.lastName }}
      <a title="Volver" class="btn btn-sm" id="backbtn" href="/patients"><i class="fa fa-reply" aria-hidden="true"></i></a>
      <a data-toggle="modal" data-target="#editPersonalInfo" title="Editar" class="btn btn-orange btn-sm" id="editbtn"><i class="fa fa-pencil" aria-hidden="true"></i></a>
      <button data-toggle="modal" data-target="#deletePatient" title="Eliminar" class="btn btn-danger btn-sm" id="deletebtn"><i class="fa fa-trash-o" aria-hidden="true"></i></button>
    </div>


    <div class="card-body">
      <!-- nav links -->
      <ul class="nav nav-tabs" id="myTab" role="tablist">
          {% if currentUser.hasPermission('paciente_show') %}
            <li class="nav-item">
              <a class="nav-link active" id="personal-tab" data-form="#editPersonalInfo" data-toggle="tab" href="#personal" role="tab" aria-controls="personal" aria-expanded="true"><i class="fa fa-user" aria-hidden="true"></i> Datos Personales</a>
            </li>
          {% endif %}
          {% if currentUser.hasPermission('datosDemograficos_show') %}
            <li class="nav-item">
                <a class="nav-link" id="demographic-tab"  data-form="#editDemographicInfo"  data-toggle="tab" href="#demographic" role="tab" aria-controls="demographic"><i class="fa fa-id-card-o" aria-hidden="true"></i> Datos Demograficos</a>
            </li>
        {% endif %}
      </ul>

    <!-- body -->
    <div class="tab-content" id="myTabContent">

        {% if currentUser.hasPermission('paciente_show') %}
            <!-- datos personales -->
            <div class="tab-pane fade show active" id="personal" role="tabpanel" aria-labelledby="personal-tab">
                {% include 'Patients/personalProfile.html.twig' %}
            </div>
        {% endif %}

        <!-- datos demograficos -->
        {% if currentUser.hasPermission('datosDemograficos_show') %}
            <div class="tab-pane fade" id="demographic" role="tabpanel" aria-labelledby="demographic-tab">
            {% include 'Patients/demographicProfile.html.twig' %}
        {% endif %}

        </div>
      </div>
    </div>
  </div>
</div>

{% endblock %} 

{% block javascripts %}
<script src="/web/assets/jquery-validate/jquery.validate.min.js"></script>
<script src="/web/dist/js/editPatientValidation.js"></script>
{% if not currentUser.hasPermission('paciente_show') %}
<script>
  $('#demographic-tab').trigger("click");
</script>
{% endif %}
{% endblock %}
